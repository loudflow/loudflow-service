[![Contributors][contributors-shield]][contributors-url]
[![Forks][forks-shield]][forks-url]
[![Stargazers][stars-shield]][stars-url]
[![Issues][issues-shield]][issues-url]
[![MIT License][license-shield]][license-url]
[![LinkedIn][linkedin-shield]][linkedin-url]

<!-- PROJECT LOGO -->
<p align="center">
    <a href="https://www.loudflow.com/">
        <img src="images/logo.png" alt="Logo" height="150">
    </a>
    <p align="center">
        A platform for developing multi-agent systems.
        <br />
        <a href="https://github.com/loudflow/loudflow-service/wiki"><strong>Explore the docs »</strong></a>
        <br />
        <br />
        <a href="https://www.loudflow.com/">View Demo</a>
        ·
        <a href="https://github.com/loudflow/loudflow-service/issues">Report Bug</a>
        ·
        <a href="https://github.com/loudflow/loudflow-service/issues">Request Feature</a>
    </p>
</p>

<!-- TABLE OF CONTENTS -->
## Table of Contents

* [About the Project](#about-the-project)
  * [Built With](#built-with)
* [Getting Started](#getting-started)
  * [Prerequisites](#prerequisites)
  * [Installation](#installation)
  * [Usage](#usage)
* [Roadmap](#roadmap)
* [License](#license)
* [Contact](#contact)

<!-- ABOUT THE PROJECT -->
## About The Project

[![Architecture][architecture]](https://www.loudflow.com/)

This project is under construction and not ready for usage. Please stay tuned for updates. 

### Built With

* [Akka](https://akka.io/)
* [Cassandra](http://cassandra.apache.org/)
* [Docker](https://www.docker.com/)
* [Kafka](https://kafka.apache.org/)
* [Kubernetes](https://kubernetes.io/)
* [Lagom Framework](https://www.lagomframework.com/)
* [Sangria](https://sangria-graphql.org/)
* [Scala](https://www.scala-lang.org/)

<!-- GETTING STARTED -->
## Getting Started

To get a local copy up and running follow these simple steps.

### Prerequisites

To download and run this project, you will need:

1. a [git](https://git-scm.com/downloads) client
2. [sbt](http://www.scala-sbt.org/download.html)
3. a [Java Development Kit](http://www.oracle.com/technetwork/java/javase/downloads/index.html)
4. a code editor (such as [IntelliJ](https://www.jetbrains.com/idea/), [Eclipse](https://www.eclipse.org/downloads/), [Atom](https://atom.io/), ... )

### Installation

1. Choose a location on your file system for the loudflow-service project. Open a console and change into the directory you selected for your project.

2. Enter the following command to create a local clone of the project.

```sh
git clone https://github.com/loudflow/loudflow-service.git
``` 

3. Lagom includes a development environment which lets you start all your services by simply typing runAll in the sbt console. To run loudflow-service locally in development mode, change directories to the top-level directory and start sbt. When the command prompt displays, invoke runAll. For example:

```sh
cd hello
sbt
... (booting up)
> runAll
```

It will take a bit of time to build the project and start the services. When  you see the following message in the console, you will know that all the services are up and running.

```sh
(Services started, press enter to stop and go back to the console...)
```

You can now invoke a loudflow-service endpoint from any HTTP client, such as a browser or curl. See below for usage examples.

<!-- USAGE EXAMPLES -->
## Usage

You can now use curl to make some basic GraphQL requests. For example, let's create a model with default options.

```sh
curl \
  -X POST \
  -H "Content-Type: application/json" \
  --data '{ "query": "mutation { create(properties: {modelType:GRAPH, graph:{grid:{rows:10,cols:10}}}) {id command} }" }' \
  http://localhost:9000/api/v1/model/graphql
```

The response to a create model mutation will contain the new model id, as shown in the following response example.

```sh
{"data":{"create":{"id":"c05036f7-a886-436e-a7ee-d57d13c9f1c4","command":"CreateModel"}}}
```

This id may be used to fetch the state of the model, as shown in the following GraphQL read query example which uses the returned model id.

```sh
curl \
  -X POST \
  -H "Content-Type: application/json" \
  --data '{ "query": "query { read(id: \"c05036f7-a886-436e-a7ee-d57d13c9f1c4\") {id state{id seed}} }" }' \
  http://localhost:9000/api/v1/model/graphql
```

The above query will return the following response where the seed value was auto-generated by loudflow.

```sh
{"data":{"read":{"id":"c05036f7-a886-436e-a7ee-d57d13c9f1c4","state":{"id":"c05036f7-a886-436e-a7ee-d57d13c9f1c4","seed":8006573802609751733}}}}
```

Finally, let's see an example of a destroy model mutation.

```sh
curl \
  -X POST \
  -H "Content-Type: application/json" \
  --data '{ "query": "mutation { destroy(id: \"c05036f7-a886-436e-a7ee-d57d13c9f1c4\") {id command} }" }' \
  http://localhost:9000/api/v1/model/graphql
```

This destroy model mutation would respond as follows.

```sh
{"data":{"destroy":{"id":"c05036f7-a886-436e-a7ee-d57d13c9f1c4","command":"DestroyModel"}}}
```

For more information, please refer to the [Documentation](https://github.com/loudflow/loudflow-service/wiki)

<!-- ROADMAP -->
## Roadmap

See the [open issues](https://github.com/loudflow/loudflow-service/issues) for a list of proposed features (and known issues).

<!-- LICENSE -->
## License

Loudflow is copyright 2019 FarSimple Oy.

Licensed under the Apache License, Version 2.0 (the "License"); you may not use this software except in compliance with the License.

Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.

<!-- CONTACT -->
## Contact

info@loudflow.com

Project Link: [https://github.com/loudflow/loudflow-service](https://github.com/loudflow/loudflow-service)

<!-- MARKDOWN LINKS & IMAGES -->
<!-- https://www.markdownguide.org/basic-syntax/#reference-style-links -->
[contributors-shield]: https://img.shields.io/github/contributors/loudflow/loudflow-service.svg?style=flat-square
[contributors-url]: https://github.com/loudflow/loudflow-service/graphs/contributors
[forks-shield]: https://img.shields.io/github/forks/loudflow/loudflow-service.svg?style=flat-square
[forks-url]: https://github.com/loudflow/loudflow-service/network/members
[stars-shield]: https://img.shields.io/github/stars/loudflow/loudflow-service.svg?style=flat-square
[stars-url]: https://github.com/loudflow/loudflow-service/stargazers
[issues-shield]: https://img.shields.io/github/issues/loudflow/loudflow-service.svg?style=flat-square
[issues-url]: https://github.com/loudflow/loudflow-service/issues
[license-shield]: https://img.shields.io/github/license/loudflow/loudflow-service.svg?style=flat-square
[license-url]: https://github.com/loudflow/loudflow-service/blob/master/LICENSE.txt
[linkedin-shield]: https://img.shields.io/badge/-LinkedIn-black.svg?style=flat-square&logo=linkedin&colorB=555
[linkedin-url]: https://linkedin.com/company/farsimple
[architecture]: images/architecture.png
